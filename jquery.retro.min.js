(function(a){a.fn.retro=function(d){var o=a.extend({cur_number:1,max_number:"10",height:"80",width:"50",margin:"5",persp:"80","border-radius":"10",year:2014,month:5,day:4,show_seconds:true,reflections:true,seperator:"<div style='float:left' class='seperator'> : </div>",font:"Arial"},d);
var r=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var p=new Date();var q=p.getYear();if(q<1000){q+=1900;}var c=p.getMonth();
var f=p.getDate();var e=p.getHours();var i=p.getMinutes();var m=p.getSeconds();var g=r[c]+" "+f+", "+q+" "+e+":"+i+":"+m;futurestring=r[o.month-1]+" "+o.day+", "+o.year;
dd=Date.parse(futurestring)-Date.parse(g);var k=Math.floor(dd/(60*60*1000*24)*1);var s=Math.floor((dd%(60*60*1000*24))/(60*60*1000)*1);var j=Math.floor(((dd%(60*60*1000*24))%(60*60*1000))/(60*1000)*1);
var l=function(t,A){var w=t+"";w=w.length;var y=a();if(w<2){w=2;}for(var u=w;u>0;--u){var v=Math.floor(t/Math.pow(10,u-1));var z=a('<div class="digit">').data("cur_digit",v).data("cur_pos",A+u).html('  <div class="back">'+(v>0?v-1:h[A+u])+'</div>					<div class="back-bottom">'+(v)+'</div>					<div class="top-half">					'+(v)+'</div>					<div class="bottom-half">'+(v>0?v-1:h[A+u])+'</div>					<div class="front">'+(v>0?v-1:h[A+u])+'</div>					<div class="shadow">					<div class="top"></div>					<div class="bottom"></div>					</div>');
t=t%Math.pow(10,u-1);y=y.add(z);}return y;};var b=function(t,v,u){t.find(".bottom-half").addClass("ready");t.addClass("flip");setTimeout(function(){t.find(".front").show();
t.find(".top-half,.bottom-half").css("opacity","0").removeClass("ready");t.removeClass("flip");setTimeout(function(){t.find(".top-half,.bottom-half").css("opacity",1);
t.find(".back-bottom, .top-half").text(v);t.find(".back, .bottom-half").text(u);t.find(".front").hide().text(u);},700);},300);};var h={sec1:9,sec2:5,min1:9,min2:5,hour1:9,hour2:5};
if(o.show_seconds==true){var n=Math.floor((((dd%(60*60*1000*24))%(60*60*1000))%(60*1000))/1000*1);}return this.each(function(){var u=a(this);u.append(l(k,"day"));
u.append(o.seperator);u.append(l(s,"hour"));u.append(o.seperator);u.append(l(j,"min"));if(o.show_seconds==true){u.append(o.seperator);u.append(l(n,"sec"));
}u.find(".digit").height(o.height+"px").width(o.width+"px").css({"font-size":o.height+"px","font-family":o.font,"line-height":o.height+"px","margin-right":o.margin+"px","-webkit-perspective":o.persp+"px","-ms-perspective":o.persp+"px","-moz-perspective":o.persp+"px",perspective:o.persp+"px"});
if(o.reflections==true){u.find(".digit").addClass("reflect");}u.find(".seperator").css({"margin-right":o.margin+"px","line-height":o.height+"px","font-size":o.height+"px"});
u.find(".bottom-half").css("top",(o.height/2)+"px");u.find(".back-bottom").css("top",(o.height/2)+"px");u.find(".back, .front, .shadow").css("border-radius",o["border-radius"]+"px");
u.find(".top-half").css({"border-top-left-radius":o["border-radius"]+"px","border-top-right-radius":o["border-radius"]+"px"});u.find(".top").css({"border-top-left-radius":o["border-radius"]+"px","border-top-right-radius":o["border-radius"]+"px"});
u.find(".back-bottom, .bottom-half, .shadow > .bottom").css({"border-bottom-left-radius":o["border-radius"]+"px","border-bottom-right-radius":o["border-radius"]+"px"});
var t=(o.show_seconds==true?1000:60000);setInterval(function(){u.find(".bottom-half").addClass("ready");u.find(".digit").each(function(){var w=(o.show_seconds==true?"sec1":"min1");
if(a(this).data("cur_pos")==w){var y=(a(this).data("cur_digit")>0?a(this).data("cur_digit")-1:h[a(this).data("cur_pos")]);var v=(y>0?y-1:h[a(this).data("cur_pos")]);
a(this).data("cur_digit",y);b(a(this),y,v);if(a(this).data("cur_digit")==h[a(this).data("cur_pos")]){var x=a(this).prev();while(x){cur_digit=(x.data("cur_digit"));
cur_next_digit=(cur_digit>0?cur_digit-1:h[x.data("cur_pos")]);x.data("cur_digit",cur_next_digit);if(x.data("cur_digit")==h[x.data("cur_pos")]){cur_next_digit=x.data("cur_digit")-1;
b(x,x.data("cur_digit"),cur_next_digit);x=x.prev();}else{cur_next_digit=(x.data("cur_digit")==0?h[x.data("cur_pos")]:x.data("cur_digit")-1);b(x,x.data("cur_digit"),cur_next_digit);
break;}}}}});},t);});};})(jQuery);